@startuml
' ==============================
'         Enumerations
' ==============================

enum ConnectionType {
    WiFi
    Zigbee
    Z-Wave
    Bluetooth
    Ethernet
}

enum EventType {
  ExternalChagne
  Configuration
}

enum PowerSource {
    Battery
    Mains
    Solar
    Other
}

' ==============================
'            Classes
' ==============================

class MainNode {

    
    + handleEvent(event : Event)
    # sendEvent(event : Event)
    + pairedDevices : List<SmartDevice>
    + roomList : List<Room>
    + addDevice(device : SmartDevice)
    + removeDevice(device : SmartDevice)
    + addRoom(room : Room)
    + removeRoom(room : Room)
    + pairDevice(device : SmartDevice)
    + unpairDevice(device : SmartDevice)
}

class Room {
    + nameLabel : String
    + miscInfo : String
    + smartDevices : List<SmartDevice>
    + addDevice(device : SmartDevice)
    + removeDevice(device : SmartDevice)
}

class SmartDevice {
    + connectionType : List<ConnectionType>
    + poweredBy : List<PowerSource>
    + isPairedTo :MainNode
    # sendEvent(event : Event)
    + handleEvent(event : Event)
}

class SmartLight
class SmartThermostat
class SmartCamera
class SmartSpeaker
class SmartPlug
class SmartVacuum


class PhoneApp {
    + user : Human
    + transmitCommand(command : Command)
    + recieveUpdates()
    + notifyUser(feedback : Feedback)
}

class Human {
    + name : String
    + phone : PhoneApp
    + makeAction()
    + acceptResponse(feedback : Feedback)
}


class Event {
  type : EventType
  data : string
}
note bottom of Event
  Represents events triggered 
    by smart devices 
    (e.g., motion detected, door unlocked)
end note

class Command {
}
note right of Command
   Represents a command sent
    from the Human via Middleware 
    to the Main Node
end note
class Feedback {
   
}
note right of Feedback 
   Represents feedback sent 
     from the Main Node 
     to the Human via Middleware
end note

' ==============================
'         Relationships
' ==============================

' MainNode Associations
MainNode -- "*" Room : manages >
MainNode -- "*" SmartDevice : manages >


' Room Composition
Room o--  SmartDevice : contains >

' SmartDevice Inheritance
SmartDevice <|-- SmartLight
SmartDevice <|-- SmartThermostat
SmartDevice <|-- SmartCamera
SmartDevice <|-- SmartSpeaker
SmartDevice <|-- SmartPlug
SmartDevice <|-- SmartVacuum

' SmartDevice and MainNode to Event Association
SmartDevice -- "*" Event : triggers >
MainNode-- "*" Event : triggers >

SmartDevice -- "*" Event : recieves <
MainNode-- "*" Event : recieves <


' Human and PhoneApp Association
Human -- PhoneApp : uses >
PhoneApp --u MainNode : communicates >
PhoneApp  -u- Feedback : recieves >
PhoneApp  -u- Command : sends >
MainNode  -u- Feedback : sends <
MainNode  -u- Command : recieves <
@enduml